# アプリケーション名
spring.application.name=spring-api

# サーバー設定
server.port=8080

# データベース設定 (MySQL)
# ローカル開発環境用（コメントアウト）
spring.datasource.url=jdbc:mysql://zebis2dev.zenkoh.com:3307/ZEBIS2_DEV?useSSL=false&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
spring.datasource.username=ZEBIS2_DEV
spring.datasource.password=Zebis2_dev-2024+
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# MyBatis 設定
mybatis.mapper-locations=classpath:mapper/**/*.xml
mybatis.type-aliases-package=com.example.springapi.**.infrastructure.repository
mybatis.configuration.map-underscore-to-camel-case=true

# ログ設定
logging.level.com.example.springapi=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.oauth2=DEBUG
logging.level.org.springframework.boot.context.config=DEBUG

# JWT 設定
# JWT_SECRETを環境変数から取得、取得できない場合はchange-me-please-change-me-32chars-minimumを使用
jwt.secret=${JWT_SECRET:change-me-please-change-me-32chars-minimum}
# Access Token 有効期限 (3600000ms = 1時間)
jwt.access-token-expiration=3600000
# Refresh Token 有効期限 (604800000ms = 7日)
jwt.refresh-token-expiration=604800000
# Issuer (トークン発行者)
jwt.issuer=spring-api

# Security User Table 設定
security.user.table=user_account

# CORS 設定
cors.allowed-origins=http://localhost:5173

# SFTP 設定
sftp.host=localhost
sftp.port=22
sftp.username=devuser
sftp.password=devpass
sftp.base-directory=/upload
sftp.connect-timeout=10000
sftp.socket-timeout=10000

# Microsoft Graph OAuth2 クライアント設定
# Graph API 用クライアントID (環境変数から取得)
spring.security.oauth2.client.registration.graph.client-id=${GRAPH_CLIENT_ID}
# Graph API 用クライアントシークレット (環境変数から取得)
spring.security.oauth2.client.registration.graph.client-secret=${GRAPH_CLIENT_SECRET}
# OAuth2 認可グラントタイプ: 認可コードフローを使用
spring.security.oauth2.client.registration.graph.authorization-grant-type=authorization_code
# リダイレクトURI (環境変数から取得)
spring.security.oauth2.client.registration.graph.redirect-uri=${GRAPH_REDIRECT_URI}
# 要求するスコープ（OpenID, プロフィール, オフラインアクセス（リフレッシュトークン取得）, ユーザー情報取得権限）
spring.security.oauth2.client.registration.graph.scope=openid,profile,offline_access,User.Read
# クライアント表示名
spring.security.oauth2.client.registration.graph.client-name=Graph
# 認可エンドポイントURI（Graph用、テナントID入り）
spring.security.oauth2.client.provider.graph.authorization-uri=https://login.microsoftonline.com/${GRAPH_TENANT_ID}/oauth2/v2.0/authorize
# トークン取得エンドポイントURI（Graph用、テナントID入り）
spring.security.oauth2.client.provider.graph.token-uri=https://login.microsoftonline.com/${GRAPH_TENANT_ID}/oauth2/v2.0/token
# JWKセットURI（公開鍵取得先、テナントID入り）
spring.security.oauth2.client.provider.graph.jwk-set-uri=https://login.microsoftonline.com/${GRAPH_TENANT_ID}/discovery/v2.0/keys
# ユーザー情報取得エンドポイント（oidc仕様）
spring.security.oauth2.client.provider.graph.user-info-uri=https://graph.microsoft.com/oidc/userinfo
# 認証ユーザー名として利用する属性（サブジェクト: sub）
spring.security.oauth2.client.provider.graph.user-name-attribute=sub

